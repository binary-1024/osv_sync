{"schema_version":"1.7.3","id":"DEBIAN-CVE-2025-68310","published":"2025-12-16T16:16:10.547Z","modified":"2026-01-14T15:14:45.440432Z","upstream":["CVE-2025-68310"],"details":"In the Linux kernel, the following vulnerability has been resolved:  s390/pci: Avoid deadlock between PCI error recovery and mlx5 crdump  Do not block PCI config accesses through pci_cfg_access_lock() when executing the s390 variant of PCI error recovery: Acquire just device_lock() instead of pci_dev_lock() as powerpc's EEH and generig PCI AER processing do.  During error recovery testing a pair of tasks was reported to be hung:  mlx5_core 0000:00:00.1: mlx5_health_try_recover:338:(pid 5553): health recovery flow aborted, PCI reads still not working INFO: task kmcheck:72 blocked for more than 122 seconds.       Not tainted 5.14.0-570.12.1.bringup7.el9.s390x #1 \"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\" disables this message. task:kmcheck         state:D stack:0     pid:72    tgid:72    ppid:2      flags:0x00000000 Call Trace:  [<000000065256f030>] __schedule+0x2a0/0x590  [<000000065256f356>] schedule+0x36/0xe0  [<000000065256f572>] schedule_preempt_disabled+0x22/0x30  [<0000000652570a94>] __mutex_lock.constprop.0+0x484/0x8a8  [<000003ff800673a4>] mlx5_unload_one+0x34/0x58 [mlx5_core]  [<000003ff8006745c>] mlx5_pci_err_detected+0x94/0x140 [mlx5_core]  [<0000000652556c5a>] zpci_event_attempt_error_recovery+0xf2/0x398  [<0000000651b9184a>] __zpci_event_error+0x23a/0x2c0 INFO: task kworker/u1664:6:1514 blocked for more than 122 seconds.       Not tainted 5.14.0-570.12.1.bringup7.el9.s390x #1 \"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\" disables this message. task:kworker/u1664:6 state:D stack:0     pid:1514  tgid:1514  ppid:2      flags:0x00000000 Workqueue: mlx5_health0000:00:00.0 mlx5_fw_fatal_reporter_err_work [mlx5_core] Call Trace:  [<000000065256f030>] __schedule+0x2a0/0x590  [<000000065256f356>] schedule+0x36/0xe0  [<0000000652172e28>] pci_wait_cfg+0x80/0xe8  [<0000000652172f94>] pci_cfg_access_lock+0x74/0x88  [<000003ff800916b6>] mlx5_vsc_gw_lock+0x36/0x178 [mlx5_core]  [<000003ff80098824>] mlx5_crdump_collect+0x34/0x1c8 [mlx5_core]  [<000003ff80074b62>] mlx5_fw_fatal_reporter_dump+0x6a/0xe8 [mlx5_core]  [<0000000652512242>] devlink_health_do_dump.part.0+0x82/0x168  [<0000000652513212>] devlink_health_report+0x19a/0x230  [<000003ff80075a12>] mlx5_fw_fatal_reporter_err_work+0xba/0x1b0 [mlx5_core]  No kernel log of the exact same error with an upstream kernel is available - but the very same deadlock situation can be constructed there, too:  - task: kmcheck   mlx5_unload_one() tries to acquire devlink lock while the PCI error   recovery code has set pdev->block_cfg_access by way of   pci_cfg_access_lock() - task: kworker   mlx5_crdump_collect() tries to set block_cfg_access through   pci_cfg_access_lock() while devlink_health_report() had acquired   the devlink lock.  A similar deadlock situation can be reproduced by requesting a crdump with   > devlink health dump show pci/<BDF> reporter fw_fatal  while PCI error recovery is executed on the same <BDF> physical function by mlx5_core's pci_error_handlers. On s390 this can be injected with   > zpcictl --reset-fw <BDF>  Tests with this patch failed to reproduce that second deadlock situation, the devlink command is rejected with \"kernel answers: Permission denied\" - and we get a kernel log message of:  mlx5_core 1ed0:00:00.1: mlx5_crdump_collect:50:(pid 254382): crdump: failed to lock vsc gw err -5  because the config read of VSC_SEMAPHORE is rejected by the underlying hardware.  Two prior attempts to address this issue have been discussed and ultimately rejected [see link], with the primary argument that s390's implementation of PCI error recovery is imposing restrictions that neither powerpc's EEH nor PCI AER handling need. Tests show that PCI error recovery on s390 is running to completion even without blocking access to PCI config space.","affected":[{"package":{"name":"linux","ecosystem":"Debian:12","purl":"pkg:deb/debian/linux?arch=source"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"0"},{"fixed":"6.1.159-1"}]}],"versions":["6.1.106-1","6.1.106-2","6.1.106-3","6.1.112-1","6.1.115-1","6.1.119-1","6.1.123-1","6.1.124-1","6.1.128-1","6.1.129-1","6.1.133-1","6.1.135-1","6.1.137-1","6.1.139-1","6.1.140-1","6.1.147-1","6.1.148-1","6.1.153-1","6.1.158-1","6.1.27-1","6.1.37-1","6.1.38-1","6.1.38-2","6.1.38-2~bpo11+1","6.1.38-3","6.1.38-4","6.1.38-4~bpo11+1","6.1.52-1","6.1.55-1","6.1.55-1~bpo11+1","6.1.64-1","6.1.66-1","6.1.67-1","6.1.69-1","6.1.69-1~bpo11+1","6.1.76-1","6.1.76-1~bpo11+1","6.1.82-1","6.1.85-1","6.1.90-1","6.1.90-1~bpo11+1","6.1.94-1","6.1.94-1~bpo11+1","6.1.98-1","6.1.99-1"],"ecosystem_specific":{"urgency":"not yet assigned"},"database_specific":{"source":"https://storage.googleapis.com/debian-osv/debian-cve-osv/DEBIAN-CVE-2025-68310.json"}},{"package":{"name":"linux","ecosystem":"Debian:13","purl":"pkg:deb/debian/linux?arch=source"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"0"},{"fixed":"6.12.63-1"}]}],"versions":["6.12.38-1","6.12.41-1","6.12.43-1","6.12.43-1~bpo12+1","6.12.48-1","6.12.57-1","6.12.57-1~bpo12+1"],"ecosystem_specific":{"urgency":"not yet assigned"},"database_specific":{"source":"https://storage.googleapis.com/debian-osv/debian-cve-osv/DEBIAN-CVE-2025-68310.json"}},{"package":{"name":"linux","ecosystem":"Debian:14","purl":"pkg:deb/debian/linux?arch=source"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"0"},{"fixed":"6.17.8-1"}]}],"versions":["6.12.38-1","6.12.41-1","6.12.43-1","6.12.43-1~bpo12+1","6.12.48-1","6.12.57-1","6.12.57-1~bpo12+1","6.12.63-1","6.13.10-1~exp1","6.13.11-1~exp1","6.13.2-1~exp1","6.13.3-1~exp1","6.13.4-1~exp1","6.13.5-1~exp1","6.13.6-1~exp1","6.13.7-1~exp1","6.13.8-1~exp1","6.13.9-1~exp1","6.13~rc6-1~exp1","6.13~rc7-1~exp1","6.14.3-1~exp1","6.14.5-1~exp1","6.14.6-1~exp1","6.15-1~exp1","6.15.1-1~exp1","6.15.2-1~exp1","6.15.3-1~exp1","6.15.4-1~exp1","6.15.5-1~exp1","6.15.6-1~exp1","6.15~rc7-1~exp1","6.16-1~exp1","6.16.1-1~exp1","6.16.10-1","6.16.11-1","6.16.12-1","6.16.12-1~bpo13+1","6.16.12-2","6.16.3-1","6.16.3-1~bpo13+1","6.16.5-1","6.16.6-1","6.16.7-1","6.16.8-1","6.16.9-1","6.16~rc7-1~exp1","6.17.2-1~exp1","6.17.5-1~exp1","6.17.6-1","6.17.7-1","6.17.7-2","6.17.8-1~bpo13+1"],"ecosystem_specific":{"urgency":"not yet assigned"},"database_specific":{"source":"https://storage.googleapis.com/debian-osv/debian-cve-osv/DEBIAN-CVE-2025-68310.json"}},{"package":{"name":"linux-6.1","ecosystem":"Debian:11","purl":"pkg:deb/debian/linux-6.1?arch=source"},"ranges":[{"type":"ECOSYSTEM","events":[{"introduced":"0"},{"fixed":"6.1.159-1~deb11u1"}]}],"versions":["6.1.106-3~deb11u1","6.1.106-3~deb11u2","6.1.106-3~deb11u3","6.1.112-1~deb11u1","6.1.119-1~deb11u1","6.1.128-1~deb11u1","6.1.129-1~deb11u1","6.1.137-1~deb11u1","6.1.140-1~deb11u1","6.1.147-1~deb11u1","6.1.148-1~deb11u1","6.1.153-1~deb11u1","6.1.158-1~deb11u1"],"ecosystem_specific":{"urgency":"not yet assigned"},"database_specific":{"source":"https://storage.googleapis.com/debian-osv/debian-cve-osv/DEBIAN-CVE-2025-68310.json"}}],"references":[{"type":"ADVISORY","url":"https://security-tracker.debian.org/tracker/CVE-2025-68310"}]}